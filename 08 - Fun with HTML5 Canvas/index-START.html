<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>HTML5 Canvas</title>
    <link rel="icon" href="https://fav.farm/ðŸ”¥" />
  </head>
  <body>
    <canvas id="draw" width="800" height="800"></canvas>
    <script>
      let isDrawing = false;
      let lineColor = 0;
      let lineWidth = 10;
      let widthAdd = true;

      const draw = document.getElementById("draw");
      const context = draw.getContext("2d");

      draw.addEventListener("mousedown", (e) => {
        x = e.offsetX;
        y = e.offsetY;
        isDrawing = true;
      });

      draw.addEventListener("mousemove", (e) => {
        if (isDrawing) {
          drawLine(context, x, y, e.offsetX, e.offsetY, lineColor, lineWidth);
          x = e.offsetX;
          y = e.offsetY;
          lineColor++;

          if (lineColor >= 360) {
            lineColor = 0;
          }
          if (lineWidth >= 50) {
            widthAdd = false;
          }
          if (lineWidth <= 10) {
            widthAdd = true;
          }
          if (widthAdd) {
            lineWidth++;
          } else {
            lineWidth--;
          }
        }
      });

      window.addEventListener("mouseup", (e) => {
        if (isDrawing) {
          drawLine(context, x, y, e.offsetX, e.offsetY, lineColor, lineWidth);
          x = 0;
          y = 0;
          isDrawing = false;
        }
      });

      function drawLine(context, x1, y1, x2, y2, lineColor, lineWidth) {
        context.beginPath();
        context.strokeStyle = `hsl(${lineColor}, 100%, 50%)`;
        context.lineCap = "round";
        context.lineWidth = lineWidth;
        context.moveTo(x1, y1);
        context.lineTo(x2, y2);
        context.stroke();
        context.closePath();
      }
    </script>

    <style>
      html,
      body {
        margin: 0;
      }

      canvas {
        background-color: darkkhaki;
      }
    </style>
  </body>
</html>
